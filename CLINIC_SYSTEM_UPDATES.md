# ุชุญุณููุงุช ูุธุงู ุชูุนูู ุงูุนูุงุฏุงุช - ููุฎุต ุงูุชุญุฏูุซุงุช

## ุงูุชุงุฑูุฎ: 2025-12-14

### โ ุงูุชุญุฏูุซุงุช ุงูููุฌุฒุฉ

#### 1. **ุฅุถุงูุฉ clinicId ูู ุงููุธุงู**
- โ ุชู ุฅุถุงูุฉ `clinicId` ูู ุฌููุน endpoints ุงููุตุงุฏูุฉ:
  - `/api/auth/login` - ุชุณุฌูู ุฏุฎูู ุงูุนูุงุฏุงุช
  - `/api/auth/admin-login` - ุชุณุฌูู ุฏุฎูู ุงููุดุฑููู
  - `/api/auth/me` - ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุญุงูู

- โ ุชู ุนุฑุถ `clinicId` ูู ุตูุญุฉ Clinics:
  - ุนููุฏ ุฌุฏูุฏ ูู ุงูุฌุฏูู ุงูุฑุฆูุณู
  - ูุณู ูููุฒ ูู ูุงูุฐุฉ ุงูุชูุงุตูู
  - ุชูุณูู ูููุฒ ุจุงูููู ุงูุฃุฎุถุฑ

#### 2. **ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏููู ุงููุงููุฉ**
- โ ูุณู ุฌุฏูุฏ ูู ูุงูุฐุฉ ุงูุชูุงุตูู ูุนุฑุถ:
  - ุงุณู ุงููุณุชุฎุฏู
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - ุงูุฏูุฑ (Role)
  - ุงูุญุงูุฉ (Status)
  - ูุนุฑู ุงููุณุชุฎุฏู (User ID)

#### 3. **ูุธุงู ุงูุฑูุถ (Reject)**
- โ Backend:
  - Endpoint ุฌุฏูุฏ: `POST /api/clinics/:id/reject`
  - ุฅููุงููุฉ ุฅุถุงูุฉ ุณุจุจ ุงูุฑูุถ
  - ุชุญุฏูุซ ุญุงูุฉ ุงูุนูุงุฏุฉ ูุงููุณุชุฎุฏููู ุงููุฑุชุจุทูู
  - ุชุณุฌูู ูู Audit Log

- โ Frontend:
  - ูุงูุฐุฉ ููุจุซูุฉ ูุฎุตุตุฉ ููุฑูุถ ูุน ุญูู ูุฅุฏุฎุงู ุงูุณุจุจ
  - ุฒุฑ Reject ูู ุงูุฌุฏูู ุงูุฑุฆูุณู
  - ุฒุฑ Reject ูู ูุงูุฐุฉ ุงูุชูุงุตูู
  - ุฑุณุงุฆู ุชุฃููุฏ ูุงุถุญุฉ

#### 4. **ุชุญุณูู ูุธุงู ุงูุจุญุซ**
ุชู ุชูุณูุน ุงูุจุญุซ ููุดูู:
- โ ุงุณู ุงูุนูุงุฏุฉ
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงุณู ุงูุทุจูุจ
- โ Clinic ID (ูุนุฑู ุงูุนูุงุฏุฉ)
- โ ุฑูู ุงููุงุชู
- โ ุงูุนููุงู

#### 5. **ุชุญุณููุงุช ุงููุงุฌูุฉ**
- โ ุชุตููู ูุญุณูู ููุฃุฒุฑุงุฑ ูุงูููุงูุฐ ุงูููุจุซูุฉ
- โ ุฃููุงู ูุงุถุญุฉ ููู ุนูููุฉ (Approve = ุฃุฎุถุฑุ Reject = ุฃุญูุฑุ Suspend = ุจุฑุชูุงูู)
- โ ุฃููููุงุช ุชูุถูุญูุฉ ููู ุนูููุฉ
- โ ุฑุณุงุฆู ุชุฃููุฏ ูุจู ุชูููุฐ ุงูุนูููุงุช ุงูุญุณุงุณุฉ

### ๐ ุงููููุงุช ุงููุนุฏูุฉ

#### Backend (Server)
1. `server/src/modules/auth/routes.ts`
   - ุฅุถุงูุฉ clinicId ูู ุงุณุชุฌุงุจุงุช ุงููุตุงุฏูุฉ

2. `server/src/modules/clinics/routes.ts`
   - ุฅุถุงูุฉ endpoint ููุฑูุถ
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช

#### Frontend (Client)
1. `client/services/api.ts`
   - ุฅุถุงูุฉ `rejectClinic()` method

2. `client/types.ts`
   - ุฅุถุงูุฉ `clinicId` ูู User interface
   - ุฅุถุงูุฉ `users` ูู Clinic interface

3. `client/pages/Clinics.tsx`
   - ุฅุถุงูุฉ ูุงูุฐุฉ ุงูุฑูุถ
   - ุฅุถุงูุฉ ุฃุฒุฑุงุฑ Reject
   - ุชุญุณูู ุงูุจุญุซ
   - ุนุฑุถ clinicId
   - ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏููู

### ๐ ุงุฎุชุจุงุฑ ุงูููุฒุงุช

#### ููุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู:
```bash
POST https://sourceplus.onrender.com/api/auth/login
Content-Type: application/json

{
  "email": "clinic@example.com",
  "password": "password123"
}
```

ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ:
```json
{
  "accessToken": "...",
  "refreshToken": "...",
  "user": {
    "id": "uuid",
    "name": "Clinic Name",
    "email": "clinic@example.com",
    "role": "clinic_admin",
    "clinicId": "clinic-uuid"  // <-- ุชู ุฅุถุงูุชู
  }
}
```

### ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

#### 1. **ุณูุฑ ุงูุนูู ุงููุงูู ููุนูุงุฏุงุช:**
```
ุทูุจ ุชุณุฌูู โ ูุนูู (PENDING)
         โ
    [ููุงููุฉ]     [ุฑูุถ]
         โ           โ
    ููุงูู        ูุฑููุถ
   (APPROVED)   (REJECTED)
         โ
   ุชุนููู/ุชูุนูู
 (SUSPENDED/APPROVED)
         โ
      [ุญุฐู]
```

#### 2. **ุงูุจุญุซ ุงูุฐูู:**
ูููู ุงูุจุญุซ ุจุงุณุชุฎุฏุงู ุฃู ูู:
- ุงุณู ุงูุนูุงุฏุฉ
- Clinic ID (ุฃูู 8 ุฃุญุฑู ุฃู ูุงูู)
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุงุณู ุงูุทุจูุจ
- ุฑูู ุงููุงุชู
- ุงูุนููุงู

#### 3. **ุนุฑุถ ูุงูู ูููุนูููุงุช:**
- โ ูุนูููุงุช ุงูุนูุงุฏุฉ ุงูุฃุณุงุณูุฉ
- โ Clinic ID ูููุฒ
- โ ุฌููุน ุงููุณุชุฎุฏููู ุงููุฑุชุจุทูู
- โ ูุนูููุงุช ุงูุชุฑุฎูุต
- โ ุชุงุฑูุฎ ุงูุชุณุฌูู ูุงูุญุงูุฉ

### ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ููุชุดุบูู:
1. ุชุฃูุฏ ูู ุชุดุบูู ุงูู Server
2. ุงูุชุญ ุตูุญุฉ Clinics ูู ููุญุฉ ุงูุชุญูู
3. ุฌุฑุจ ุงูุจุญุซ ุจุงุณุชุฎุฏุงู Clinic ID
4. ุงูุชุญ ุชูุงุตูู ุนูุงุฏุฉ ูุฑุคูุฉ ุงููุนูููุงุช ุงููุงููุฉ

### ๐ ููุงุญุธุงุช ูููุฉ

1. **Clinic ID** ูุชู ุนุฑุถู ุจุดูู ูุฎุชุตุฑ (ุฃูู 8 ุฃุญุฑู) ูู ุงูุฌุฏูู
2. **Clinic ID** ุงููุงูู ูุธูุฑ ูู ูุงูุฐุฉ ุงูุชูุงุตูู
3. **Reject** ูุณูุญ ุจุฅุถุงูุฉ ุณุจุจ ุงุฎุชูุงุฑู
4. ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ูู **Audit Logs**
5. ุงูุจุญุซ ูุนูู ุนูู ุงููุต ุงููุงูู ุจุฏูู ุญุณุงุณูุฉ ูุญุงูุฉ ุงูุฃุญุฑู

### โจ ุชู ุฅูุฌุงุฒู ุจูุฌุงุญ!
ุฌููุน ุงููุชุทูุจุงุช ุชู ุชูููุฐูุง:
- โ ุชุฎุฒูู ูุนุฑุถ clinicId
- โ ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏููู ูุงููุฉ
- โ ูุธุงู ุงูููุงููุฉ ูุงูุฑูุถ
- โ ุชุญุณูู ุงูุจุญุซ
- โ ูุธุงู ุงูุฅููุงู/ุงูุชูุนูู
- โ endpoint ุชุณุฌูู ุงูุฏุฎูู ูุนูู ุจุดูู ุตุญูุญ
